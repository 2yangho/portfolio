# 시계열 센서데이터 이상탐지
---

### 프로젝트 개요

> 배경

```
제조 과정에서 일부 장비에 문제가 발생하면 생산과정에 차질이 발생한다.
이를 방지하기 위해 장비의 센서 데이터를 실시간으로 모니터링하고 
이상 징후를 미리 탐지할 수 있는 "시계열 센서데이터 이상탐지" 프로젝트를 시작하여,
다양한 이상탐지 알고리즘을 활용하여 센서 데이터 내의 이상한 포인트나 패턴을 식별하고자 한다.
```

> 분석 목적

```
장비 고장 예방으로 지속적인 생산량 및 품질 유지, 장비 수리 비용 절감
```
---
### 분석 과정 

> 데이터 전처리

- Sensor_50의 결측치 7만개, Sensor_51의 결측치 1.5만개를 miceforest를 이용해 대체 → 모델 성능을 위한 데이터 보호
- 상관계수 높은 센서들을 그룹화해 통합 → 데이터 차원 축소를 통해 모델 성능 향상
- "예측" 모델을 위한 목표변수 재설정(Shifiting) : 이상상황 발생 시점을 목표변수로서 잡는게 아닌, 이상상황 발생 20분 전까지의 데이터를 목표변수로 설정
> 데이터 불균형을 해소하기 위한 전략

- 정상 상태 데이터 수 : 고장 상태 데이터 수 = 220,320 : 7 로 데이터 불균형이 심한 문제

  Oversampling, Undersampling의 단점인 데이터 손실/왜곡 문제 해결할 대안으로 AutoEncoder 딥러닝 모델 사용

---
### 분석 결과
```
- ROC Score = 0.897, 이상상황 감지 확률 : 55% 인 이상탐지 모델 구축
- 고장 상황 발생전 20분 내에 이상상황 감지 확률 = 99.99998582%
```
※ROC Score : 모델이 얼마나 양성(고장)과 음성(정상)을 잘 분류하는지 보여주는 지표. 0.5 ~ 1 사이의 값을 가진다.

---
### 기대 효과
```
- 고장 상황 발생 20분 전에 이상상황 알림을 함으로서 충분한 시간 확보, 이를 통한 장비 잠재적 문제 해결 가능성 증대
- 장비 고장 예방을 통해 지속적인 생산량 및 품질 유지로 제품 신뢰성 확보
- 장비 고장으로 생기는 유지비용 대폭 감소 효과
```

---
### Lesson & Learned
(그냥 사진으로 대체하는게 가독성이 좋을 것 같다..)
|고민 및 문제|막혔던 원인| 해결방안|
|---|---|---|
|결측치 처리 문제|행/열을 삭제하자니 손실되는 데이터가 너무 많았고, 0 또는 평균으로 대체하자니 모델 학습에 방해가 될 것같았다|회귀 분석 모델을 이용해 결측값을 예측하여 대체한다|
|기존 목표변수의 기능적 문제| 기존 목표변수를 가지고 모델을 만들어 이상상황을 예측할 경우, 이상상황 발생 직전에야 감지하고 결국 사전예방 기능을 수행못하는 문제가 있다. | 목표변수의 '고장' 값이 일어난 시점 기준 20분 전까지의 데이터를 '고장'값으로 바꾼다.|
|데이터 불균형 문제|전체 22만개 중 7개의 데이터만이 고장상태 데이터이어서, UnderSampling을 이용하기에는 데이터의 손실이 너무 컸고 Oversampling을 이용하기에는 생성되는 불확정적인 데이터가 너무 많아 모델 정확도가 낮아질 위험이 있었다.|불균형 문제에 특화된 AutoEncoder 딥러닝 모델을 이용해 데이터의 손실 없이 학습을 시킬 수 있었다. |
